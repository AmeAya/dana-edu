{% extends 'base.html' %}
{% block content %}
    <div align="center" style="font-size: 18px;">
        <form id="group-form" class="form" action="{% url 'set_exam_for_groups_url' %}" method="post">
            {% csrf_token %}

            <p>
                <label for="group">Select Group: </label>
                <select id="group" name="group">
                    {% for group in groups %}
                        <option value="{{ group.id }}">{{ group.number }}{{ group.literal }}</option>
                    {% endfor %}
                </select>
            </p>

            <p>
                <label for="start_time">Start Time: </label>
                <input type="datetime-local" id="start_time" name="start_time" required>
            </p>

            <p>
                <label for="duration">Duration (minutes): </label>
                <input type="number" id="duration" name="duration" style="width:30%" required>
            </p>

            <div id="hidden-variants" hidden="hidden">
                {% for variant in variants %}
                    <input type="checkbox" id="{{ variant.id }}" value="{{ variant.id }}" name="variants">
                {% endfor %}
            </div>
        </form>

        <h2 style="margin-bottom: 0px;">Select Variants:</h2>
        <div id="variants" align="center">
            {% for variant in variants %}
                <button class="question_button" onclick="selectVariant({{ variant.id }})" style="width: auto; border: 1px solid #0ABAB5; border-radius: 8px;">{{ variant.name }}</button>
            {% endfor %}
        </div>

        <input class="btn" form="group-form" type="submit" value="Set Exam" style="font-size: 120%">

        <hr>
        <table class="groups_exams">
            <tr>
                <th>Group</th>
                <th>Starts at</th>
                <th>Duration</th>
                <th>Ends at</th>
            </tr>
            {% for exam in exam_for_groups %}
                <tr>
                    <td>{{ exam.group }}</td>
                    <td>{{ exam.starts_at|date:'Y-m-d H:i' }}</td>
                    <td>{{ exam.duration }}</td>
                    <td>{{ exam.ends_at|date:'Y-m-d H:i' }}</td>
                </tr>
            {% endfor %}
        </table>
    </div>
    <script>
        function selectVariant(variant_id){
            let thisButton = event.srcElement;
            let input = document.getElementById(variant_id);

            if (input.checked == true){
                input.checked = false;
                thisButton.style.background = '#0ABAB5';
                thisButton.style.color = '';
            }
            else {
                input.checked = true;
                thisButton.style.background = '#DCDCDC';
                thisButton.style.color = '#0ABAB5';
            }
        }
    </script>
{% endblock content %}